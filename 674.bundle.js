(()=>{"use strict";var t,i,e,n,a,h=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function r(t){return t.map((function(t){return t%12}))}function f(){if(i&&n){for(var t=function(t,i,e,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;return t.map((function(t){return i*Math.pow((t-e)/(n-e),a)}))}([0,1,2,3,4,5,6,7,8,9,10,11],i.height,-.5,11.5,1),e=0;e<t.length;e++)n.fillStyle="rgba(208, 215, 222, 0.5)",n.fillRect(35,i.height-t[e],1*a,1);for(var r=0;r<t.length;r++)n.fillStyle="rgba(208, 215, 222, 1)",n.fillText("".concat(h[r]),10,i.height-t[r]+7)}}self.onmessage=function(h){var g=h.data,o=g.type,l=g.data;switch(o){case"init":t=h.data.mainCanvas,i=h.data.bgCanvas,a=h.data.historySize,e=t.getContext("2d"),(n=i.getContext("2d")).font="20px Signika",e.font="20px Signika",f();break;case"render":(function(i){if(t&&e&&0!=i.fHistory.length){var n=i.fHistory.length;e.drawImage(t,n,0,t.width-n,t.height,0,0,t.width-n,t.height),e.fillStyle="rgb(16,7,25)",e.fillRect(t.width-n,0,n,t.height);for(var a=0;a<i.fHistory.length;a++)if(null!==i.fHistory[a]&&0!=i.fHistory[a].length)for(var h=i.fHistory[a],f=h.map((function(t){return t.frequency>31?12*Math.log2(t.frequency/440)+69:0})),g=r(f),o=g.map((function(t){return 30*(t+3)})),l=0;l<f.length;l++){var c=o[l],s=g[l];e.beginPath(),e.fillStyle="hsla(".concat(c,", 100%, 70%, ").concat(h[l].magnitude,")"),e.arc(t.width-a,t.height-(s+.5)%12/12*t.height,2,0,2*Math.PI),e.fill()}}})(l.state);break;case"resize":t.width=l.width,t.height=l.height,i.width=l.width,i.height=l.height,a=l.historySize,n.font="20px Signika",e.font="20px Signika",f()}}})();
//# sourceMappingURL=674.bundle.js.map